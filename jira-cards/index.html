<!DOCTYPE html>
<html>
	<head>
		<title>Load JIRA Cards</title>
		<style type="text/css">
			body { font-family:sans-serif }
		</style>
	</head>
	<body>
		<h2>Load JIRA cards</h2>
		<form action="cards.html" onSubmit="document.getElementById('jql').value = preprocessJql(document.getElementById('jql').value)">
			JQL, e.g <tt>project = Mobile and assignee = pranavraja and not (status = Closed)</tt><br/><textarea id="jql" name="query" rows="5" cols="100"></textarea><br/>
			<input type="submit" value="Load cards" />
		</form>
		My Issues: <a class="query" href="javascript:void 0">not (status = Closed) and assignee = currentUser()</a><br/>
		Issues created yesterday: <a class="query" href="javascript:void 0">created &gt; {yesterday}</a><br/>
		Issues created today: <a class="query" href="javascript:void 0">created &gt; {today}</a><br/>

		<script>
			var preprocessJql = function (jql) {
				var d = new Date();
				d.setHours(0);
				jql = jql.replace(/\{today\}/g, d.getTime());
				d.setDate(d.getDate()-1);
				jql = jql.replace(/\{yesterday\}/g, d.getTime());
				return jql;
			};
			Array.prototype.slice.call(document.querySelectorAll('a.query')).forEach(function (link) {
				link.addEventListener('click', function (event) {
					document.getElementById('jql').value = event.currentTarget.innerHTML.replace('&gt;','>');
				});
			});
		</script>
	</body>
</html>
